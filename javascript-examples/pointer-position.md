# Pointer position example

<div class="ndl-images">
    <img src="/javascript-examples/pointer-position.png" class="ndl-image med"></img>  
     <button class="ndl-copy-nodes-button" onClick='copyJsonToClipboard({"nodes":[{"id":"5a91d4ae-4ac5-b056-9b1a-c6fd5d2f9d16","type":"Javascript2","label":"Pointer Position","x":312.646653600435,"y":608.4116804792661,"parameters":{"code":"script({\n\toutputs:{\n\t    pointerX:\"number\",\n\t    pointerY:\"number\"\n\t},\n\tsetup() {\n\t    document.body.addEventListener(\"mousemove\", e=> {\n\t        this.setOutputs({\n\t            pointerX: e.clientX,\n\t            pointerY: e.clientY\n\t        })\n\t    })\n\t}\n})\n"},"ports":[],"dynamicports":[{"name":"pointerX","type":{"name":"number"},"plug":"output","group":"Outputs","index":2},{"name":"pointerY","type":{"name":"number"},"plug":"output","group":"Outputs","index":3}],"children":[]},{"id":"76765bb6-013c-01b6-7a87-f3d6df75584d","type":"Number","label":"X","x":544.1852393850872,"y":566.4116804792661,"parameters":{},"ports":[],"dynamicports":[],"children":[]},{"id":"ce1134b8-51d1-c62a-2914-e3bbd7691da1","type":"Number","label":"Y","x":537.0515342038673,"y":714.4425355210861,"parameters":{},"ports":[],"dynamicports":[],"children":[]}],"connections":[{"fromId":"5a91d4ae-4ac5-b056-9b1a-c6fd5d2f9d16","fromProperty":"pointerX","toId":"76765bb6-013c-01b6-7a87-f3d6df75584d","toProperty":"value"},{"fromId":"5a91d4ae-4ac5-b056-9b1a-c6fd5d2f9d16","fromProperty":"pointerY","toId":"ce1134b8-51d1-c62a-2914-e3bbd7691da1","toProperty":"value"}]})'></button>
</div>

This example will attach an event listener to the body element of the web page, and listen for mousemove. 

```
script({
	outputs:{
	    pointerX:'number',
	    pointerY:'number'
	},
	setup() {
	    document.body.addEventListener('mousemove', e=> {
	        this.setOutputs({
	            pointerX: e.clientX,
	            pointerY: e.clientY
	        })
	    })
	}
})

```

Now lets extend this to also include the `mousedown` event, so it updates directly when a pointer event starts, not just when it moves. Since we need the same code twice we can add it to a function, which is defined in `methods:`. We need to be careful about the `this` reference, and make sure it's correct when the event listener is fired. We'll use `bind()` to save the function with a specific `this` reference bound to it.
```
script({
	outputs:{
	    pointerX:"number",
	    pointerY:"number"
	},
	setup() {
	    // bind the setPosition method to `this` and save it in a variable
	    this.onMouseEvent = this.setPosition.bind(this);
	    
	    document.body.addEventListener("mousemove", this.onMouseEvent);
	    document.body.addEventListener("mousedown", this.onMouseEvent);
	},
	methods: {
	    setPosition(e) {
	        this.setOutputs({
	            pointerX: e.clientX,
	            pointerY: e.clientY
	        })
	    }
	}
})
```

We can extend this even further by removing the event listener when the Javascript node is desroyed. This can happen when a user navigates from a page that runs this code, or when a component with this code is generated by a **For Each** node.

```
script({
	outputs:{
	    pointerX:"number",
	    pointerY:"number"
	},
	setup() {
		// bind the setPosition method to `this` and save it in a variable
	    // so we can remove the event listener later
	    this.onMouseEvent = this.setPosition.bind(this);
	    
	    document.body.addEventListener("mousemove", this.onMouseEvent);
	    document.body.addEventListener("mousedown", this.onMouseEvent);
	},
	destroy() {
	    document.body.removeEventListener("mousedown", this.onMouseEvent);
	    document.body.removeEventListener("mousemove", this.onMouseEvent);
	},
	methods: {
	    setPosition(e) {
	        this.setOutputs({
	            pointerX: e.clientX,
	            pointerY: e.clientY
	        })
	    }
	}
})
```